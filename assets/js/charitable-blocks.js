!function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:r})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)n.d(r,o,function(t){return e[t]}.bind(null,o));return r},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){e.exports=n(1)},function(e,t,n){"use strict";n.r(t);var r=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M18.9,1.1V18.9H1.1V1.1H18.9M20,0H0V20H20V0Z"}),wp.element.createElement("rect",{width:"20",height:"9"}),wp.element.createElement("rect",{x:"3",y:"11",width:"11",height:"2"}),wp.element.createElement("rect",{x:"3",y:"15",width:"14",height:"2"})),o=function(e){return e.hasOwnProperty("_embedded")&&e._embedded.hasOwnProperty("wp:featuredmedia")},a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"thumbnail",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:30,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:30;return o(e)?wp.element.createElement("img",{src:e._embedded["wp:featuredmedia"][0].media_details.sizes[t].source_url,width:n,height:r}):""};function i(e){return(i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function l(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function c(e){return(c=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function u(e,t){return(u=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var p=wp.element.Component,m=wp.components.Dashicon,f=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=c(t).call(this,e))||"object"!==i(o)&&"function"!=typeof o?s(r):o).handleClick=n.handleClick.bind(s(n)),n.handleKeyDown=n.handleKeyDown.bind(s(n)),n}var n,r,p;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&u(e,t)}(t,e),n=t,(r=[{key:"handleClick",value:function(){this.props.add_or_remove_campaign_callback(this.props.campaign.id)}},{key:"handleKeyDown",value:function(e){"Enter"===e.key&&this.props.add_or_remove_campaign_callback(this.props.campaign.id)}},{key:"render",value:function(){var e=this,t=this.props.campaign,n=this.props.selected?wp.element.createElement(m,{icon:"yes"}):null,r=0===this.props.index?r:"";return wp.element.createElement("div",{className:function(t){var n="charitable-campaigns-list-card__content";return e.props.selected&&(n+=" charitable-campaigns-list-card__content--added"),o(t)&&(n+=" charitable-campaigns-list-card__content--has-thumbnail"),n}(t),onClick:this.handleClick,onKeyDown:this.handleKeyDown,isDefault:!0,tabIndex:this.props.index},a(t),wp.element.createElement("span",{className:"charitable-campaigns-list-card__content-item-name"},t.title.rendered),n)}}])&&l(n.prototype,r),p&&l(n,p),t}(p),d=wp.element.createRef,b={search_field:d(),search_results:d(),selected_results:d()};function y(e){return(y="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function h(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function g(e,t){return!t||"object"!==y(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function w(e){return(w=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function v(e,t){return(v=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var _=wp.i18n.__,E=wp.element.Component,k=wp.components.NavigableMenu,O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),g(this,w(t).apply(this,arguments))}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&v(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.props.is_dropdown_open_callback(!0)}},{key:"componentDidUnmount",value:function(){this.props.is_dropdown_open_callback(!1)}},{key:"render",value:function(){var e=this.props,t=e.campaigns,n=e.add_or_remove_campaign_callback,r=e.selected_campaigns,o=[],a=0,i=!0,l=!1,c=void 0;try{for(var s,u=t[Symbol.iterator]();!(i=(s=u.next()).done);i=!0){var p=s.value;o.push(wp.element.createElement(f,{index:a,campaign:p,add_or_remove_campaign_callback:n,selected:r.includes(p.id)})),a+=1}}catch(e){l=!0,c=e}finally{try{i||null==u.return||u.return()}finally{if(l)throw c}}return wp.element.createElement(k,{className:"charitable-campaigns-list-card__search-results","aria-label":_("Campaign list","charitable"),ref:b.search_results},o)}}])&&h(n.prototype,r),o&&h(n,o),t}(E),C={};function S(e){return(S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function j(e){return(j=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function P(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function x(e,t){return(x=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var T=wp.i18n.__,A=wp.element.Component,N=wp.apiFetch,R=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=j(t).call(this,e))||"object"!==S(o)&&"function"!=typeof o?P(r):o).state={filtered:[],campaign_count:null,campaigns:[],query:"",loaded:!1,controllers:[]},n.getQuery=n.getQuery.bind(P(n)),n.updateResults=n.updateResults.bind(P(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&x(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;N({path:"/wp/v2/campaigns?_embed&per_page=100&active_status="+this.props.campaign_active_status,parse:!1}).then((function(t){t.json().then((function(n){e.setState({campaigns:n,loaded:!0,campaign_count:t.headers.get("X-WP-Total")}),e.updateResults()}))}))}},{key:"componentDidUpdate",value:function(){this.props.search_string!==this.state.query&&this.updateResults()}},{key:"getQuery",value:function(){return this.props.search_string.length?"/wp/v2/campaigns?_embed&per_page=10&search="+this.props.search_string:""}},{key:"updateResults",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;if(!this.state.loaded){if(e<25)return e+=1,window.setTimeout(this.updateResults,500,e);this.setState({loaded:!0})}var t=this.props.search_string,n=t.toLowerCase(),r=this.state.campaigns.filter((function(e){return e.title.rendered.toLowerCase().includes(n)}));this.setState({query:t,filtered:r})}},{key:"render",value:function(){if(!this.state.loaded||!this.state.query.length)return null;if(0===this.state.filtered.length)return wp.element.createElement("span",{className:"charitable-campaign-list-card__search-no-results"}," ",T("No campaigns found")," ");var e=!0,t=!1,n=void 0;try{for(var r,o=this.state.filtered[Symbol.iterator]();!(e=(r=o.next()).done);e=!0){var a=r.value;C[a.id]=a}}catch(e){t=!0,n=e}finally{try{e||null==o.return||o.return()}finally{if(t)throw n}}return wp.element.createElement(O,{campaigns:this.state.filtered,add_or_remove_campaign_callback:this.props.add_or_remove_campaign_callback,selected_campaigns:this.props.selected_campaigns,is_dropdown_open_callback:this.props.is_dropdown_open_callback})}}])&&D(n.prototype,r),o&&D(n,o),t}(A);function I(e){return(I="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function L(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function M(e){return(M=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e,t){return(H=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}wp.i18n.__;var B=wp.element,F=B.Component,Q=B.findDOMNode,q=B.createRef,K=wp.components.Dashicon,Z=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=M(t).call(this,e))||"object"!==I(o)&&"function"!=typeof o?V(r):o).state={search_text:"",dropdown_open:!1},n.handleKeyDown=n.handleKeyDown.bind(V(n)),n.updateSearchResults=n.updateSearchResults.bind(V(n)),n.isDropdownOpen=n.isDropdownOpen.bind(V(n)),b.search_results=q(),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&H(e,t)}(t,e),n=t,(r=[{key:"isDropdownOpen",value:function(e){this.setState({dropdown_open:!!e})}},{key:"updateSearchResults",value:function(e){this.setState({search_text:e.target.value})}},{key:"handleKeyDown",value:function(e){if("ArrowDown"===e.key){e.stopPropagation();var t=Q(b.search_results.current);t&&t.firstElementChild.focus()}}},{key:"render",value:function(){var e="charitable-campaigns-list-card__search-wrapper";return wp.element.createElement("div",{className:e+(this.state.dropdown_open?" "+e+"--with-results":"")},wp.element.createElement("div",{className:"charitable-campaigns-list-card__input-wrapper"},wp.element.createElement(K,{icon:"search"}),wp.element.createElement("input",{type:"search",className:"charitable-campaigns-list-card__search",value:this.state.search_text,placeholder:this.props.search_placeholder,tabIndex:"0",onKeyDown:this.handleKeyDown,onChange:this.updateSearchResults,ref:b.search_field})),wp.element.createElement(R,{search_string:this.state.search_text,add_or_remove_campaign_callback:this.props.add_or_remove_campaign_callback,selected_campaigns:this.props.selected_campaigns,is_dropdown_open_callback:this.isDropdownOpen,campaign_active_status:this.props.campaign_active_status}))}}])&&L(n.prototype,r),o&&L(n,o),t}(F);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function G(e){return(G=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function W(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var J=wp.i18n.__,Y=wp.element.Component,$=wp.apiFetch,ee=wp.components.Dashicon,te=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=G(t).call(this,e))||"object"!==U(o)&&"function"!=typeof o?W(r):o).state={query:"",loaded:!1},n.getQuery=n.getQuery.bind(W(n)),n.updateCampaignCache=n.updateCampaignCache.bind(W(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.updateCampaignCache()}},{key:"componentDidUpdate",value:function(){this.state.loaded&&this.getQuery()!==this.state.query&&this.updateCampaignCache()}},{key:"getQuery",value:function(){if(!this.props.selected_campaigns.length)return"";var e=[],t=!0,n=!1,r=void 0;try{for(var o,a=this.props.selected_campaigns[Symbol.iterator]();!(t=(o=a.next()).done);t=!0){var i=o.value;C.hasOwnProperty(i)||e.push(i)}}catch(e){n=!0,r=e}finally{try{t||null==a.return||a.return()}finally{if(n)throw r}}return e.length?"/wp/v2/campaigns?_embed&include="+e.join(","):""}},{key:"updateCampaignCache",value:function(){var e=this,t=this.getQuery();e.setState({query:t,loaded:!1}),t.length&&$({path:t}).then((function(t){if(t.length){var n=!0,r=!1,o=void 0;try{for(var a,i=t[Symbol.iterator]();!(n=(a=i.next()).done);n=!0){var l=a.value;C[l.id]=l}}catch(e){r=!0,o=e}finally{try{n||null==i.return||i.return()}finally{if(r)throw o}}}console.log(t),e.setState({loaded:!0})}))}},{key:"render",value:function(){var e=this.props,t=e.selected_campaigns,n=e.add_or_remove_campaign_callback,r=[],o=!0,i=!1,l=void 0;try{for(var c,s=function(){var e=c.value;if(!C.hasOwnProperty(e))return"continue";var t=C[e];r.push(wp.element.createElement("li",{className:"charitable-campaigns-list-card__item campaign",key:t.id+"-specific-select-edit"},wp.element.createElement("div",{className:"charitable-campaigns-list-card__content"},a(t),wp.element.createElement("span",{className:"charitable-campaigns-list-card__content-item-name"},t.title.rendered),wp.element.createElement("button",{type:"button",id:"campaign-"+t.id,onClick:function(){n(t.id)}},wp.element.createElement(ee,{icon:"no-alt"})))))},u=t[Symbol.iterator]();!(o=(c=u.next()).done);o=!0)s()}catch(e){i=!0,l=e}finally{try{o||null==u.return||u.return()}finally{if(i)throw l}}var p=null,m=null;return t.length>0&&(m=wp.element.createElement("ul",{className:"charitable-campaigns-list-card__selected-results-list"},r.length?r:J("Loading...","charitable")),p=1===t.length?wp.element.createElement("h4",null,J("Selected campaign","charitable")):wp.element.createElement("h4",null,J("Selected campaigns","charitable"))),wp.element.createElement("div",{className:"charitable-campaigns-list-card__selected-results-wrapper"},wp.element.createElement("div",{role:"menu",className:"charitable-campaigns-list-card__selected-results","aria-orientation":"vertical","aria-label":J("Selected campaigns","charitable")},p,m))}}])&&z(n.prototype,r),o&&z(n,o),t}(Y);function ne(e){return(ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function oe(e){return(oe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ie(e,t){return(ie=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}wp.i18n.__;var le=function(e){function t(e){var n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),r=this,(n=!(o=oe(t).call(this,e))||"object"!==ne(o)&&"function"!=typeof o?ae(r):o).state={selected_campaigns:e.selected_campaigns||[]},n.addOrRemoveCampaign=n.addOrRemoveCampaign.bind(ae(n)),n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ie(e,t)}(t,e),n=t,(r=[{key:"addOrRemoveCampaign",value:function(e){var t=this.state.selected_campaigns;t.includes(e)?t=t.filter((function(t){return t!==e})):this.props.multiple?t.push(e):t=[e],this.setState({selected_campaigns:t}),this.props.update_campaign_setting_callback(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.label,r=t.columns,o=t.campaign_active_status,a=n?wp.element.createElement("label",null,n):null;return wp.element.createElement("div",{className:"charitable-campaigns-field"},a,wp.element.createElement(Z,{add_or_remove_campaign_callback:function(t){return e.addOrRemoveCampaign(t)},selected_campaigns:this.state.selected_campaigns,campaign_active_status:o}),wp.element.createElement(te,{selected_campaigns:this.state.selected_campaigns,add_or_remove_campaign_callback:function(t){return e.addOrRemoveCampaign(t)},columns:r,campaign_active_status:o}))}}])&&re(n.prototype,r),o&&re(n,o),t}(wp.element.Component),ce=le;function se(e){return(se="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function ue(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function pe(e){return(pe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function fe(e,t){return(fe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var de=wp.i18n.__,be=wp.element.Component,ye=wp.data.useSelect,he=wp.components,ge=he.PanelBody,we=he.PanelRow,ve=(he.withAPIData,he.SelectControl,he.ToggleControl,he.RangeControl),_e=(wp.element.findDOMNode,wp.editor.InspectorControls),Ee=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=pe(t).apply(this,arguments))||"object"!==se(r)&&"function"!=typeof r?me(n):r).getCurrentPostType=e.getCurrentPostType(me(e)),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&fe(e,t)}(t,e),n=t,(r=[{key:"getCurrentPostType",value:function(e){return ye((function(t){return t("core/editor").getCurrentPostType(e)}))}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.isSelected,r=e.setAttributes,o=(t.campaign,t.columns),a=this.getCurrentPostType(this.state);return[n&&wp.element.createElement(_e,{key:"inspector",description:de("Configure")},wp.element.createElement(ce,{key:"campaign-select",label:de("Campaign"),selectedOption:t.campaign,onChange:function(e){return props.setAttributes({campaign:e})}}),wp.element.createElement(ge,{title:a},wp.element.createElement(we,null,wp.element.createElement(ve,{key:"columns-select",label:de("Columns"),value:o,min:"1",max:"4",onChange:function(e){return r({columns:e})}})))),wp.element.createElement("p",{key:"charitable-campaign-summary"},de("CAMPAIGN Summary"))]}}])&&ue(n.prototype,r),o&&ue(n,o),t}(be),ke=wp.i18n.__;(0,wp.blocks.registerBlockType)("charitable/campaign-summary",{title:ke("Campaign Summary"),category:"widgets",icon:r,keywords:[ke("Fundraisers"),ke("Charitable"),ke("Donation")],edit:Ee,save:function(){return null}});var Oe=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M18.9,1.1V18.9H1.1V1.1H18.9M20,0H0V20H20V0Z"}),wp.element.createElement("rect",{width:"20",height:"9"}),wp.element.createElement("rect",{x:"3",y:"11",width:"11",height:"2"}),wp.element.createElement("rect",{x:"3",y:"15",width:"14",height:"2"}));function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Pe(e,t,n){return t&&je(e.prototype,t),n&&je(e,n),e}function xe(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?Ae(e):t}function Te(e){return(Te=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ae(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ne(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Re(e,t)}function Re(e,t){return(Re=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ie=wp.i18n.__,Le=wp.element.Component,Me=wp.apiFetch,Ve=function(e){function t(e){var n;return De(this,t),(n=xe(this,Te(t).call(this,e))).state={selectedCategories:e.selected_categories,firstLoad:!0},n.checkboxChange=n.checkboxChange.bind(Ae(n)),n.setFirstLoad=n.setFirstLoad.bind(Ae(n)),n}return Ne(t,e),Pe(t,[{key:"checkboxChange",value:function(e,t){var n,r=this.state.selectedCategories;(r=r.filter((function(e){return!t.includes(e)})),e)&&(n=r).push.apply(n,Se(t));this.setState({selectedCategories:r}),this.props.update_category_setting_callback(r)}},{key:"setFirstLoad",value:function(e){this.setState({firstLoad:!!e})}},{key:"render",value:function(){var e=null;return this.props.label.length&&(e=wp.element.createElement("label",null,this.props.label)),wp.element.createElement("div",{className:"charitable-campaign-categories-list"},e,wp.element.createElement(He,{selectedCategories:this.state.selectedCategories,checkboxChange:this.checkboxChange,firstLoad:this.state.firstLoad,setFirstLoad:this.setFirstLoad}))}}]),t}(Le),He=function(e){function t(e){var n;return De(this,t),(n=xe(this,Te(t).call(this,e))).state={categories:[],loaded:!1,query:""},n.updatePreview=n.updatePreview.bind(Ae(n)),n.getQuery=n.getQuery.bind(Ae(n)),n}return Ne(t,e),Pe(t,[{key:"componentDidMount",value:function(){this.getQuery()!==this.state.query&&this.updatePreview()}},{key:"componentDidUpdate",value:function(){this.getQuery()!==this.state.query&&this.state.loaded&&this.updatePreview()}},{key:"getQuery",value:function(){return"/wp/v2/campaignCategories"}},{key:"updatePreview",value:function(){var e=this,t=this.getQuery();e.setState({loaded:!1}),Me({path:t}).then((function(n){e.setState({categories:n,loaded:!0,query:t})}))}},{key:"render",value:function(){var e=this.props,t=e.selectedCategories,n=e.checkboxChange;if(!this.state.loaded)return Ie("Loading categories","charitable");if(0===this.state.categories.length)return Ie("No categories found","charitable");var r=function e(t,n){var r=[];return n.filter((function(e){return e.parent===t.id})).forEach((function(t){r.push(t),r.push.apply(r,Se(e(t,n)))})),r},o=this.state.categories;return wp.element.createElement("div",{className:"charitable-category-list-card__results"},wp.element.createElement((function(e){var o=e.categories,a=(e.parent,o);return a.length>0&&wp.element.createElement("ul",null,a.map((function(e){return wp.element.createElement("li",{key:e.id,className:"charitable-category-list-card__item"},wp.element.createElement("label",null,wp.element.createElement("input",{type:"checkbox",id:"campaign-category-"+e.slug,value:e.slug,checked:t.includes(e.slug),onChange:function(t){return function(e,t,o){var a=r(t,o).map((function(e){return e.slug}));a.push(t.slug),n(e.target.checked,a)}(t,e,o)}})," ",e.name,wp.element.createElement("span",{className:"charitable-category-list-card__taxonomy-count"},e.count)))})))}),{categories:o,parent:0}))}}]),t}(Le);function Be(e){return(Be="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Qe(e,t){return!t||"object"!==Be(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function qe(e){return(qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ke(e,t){return(Ke=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}wp.i18n.__;var Ze=wp.element.Component,Ue=wp.components.Dashicon,ze=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Qe(this,qe(t).call(this,e))).state={enabled:e.enabled},n}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ke(e,t)}(t,e),n=t,(r=[{key:"render",value:function(){var e=this,t={},n="arrow-up-alt2";return this.state.enabled||(t.display="none",n="arrow-down-alt2"),wp.element.createElement("div",{className:"charitable-block-settings-filter"+(this.state.enabled?" is-opened":"")},wp.element.createElement("div",{className:"charitable-block-settings-filter-toggle"},wp.element.createElement("h3",{className:"charitable-block-settings-filter-header"},this.props.title,wp.element.createElement("button",{onClick:function(){e.setState({enabled:!e.state.enabled})},className:"charitable-block-settings-filter-toggle__accordion-button",type:"button"},wp.element.createElement(Ue,{icon:n})))),wp.element.createElement("div",{className:"charitable-block-settings-filter-settings",style:t},this.props.children))}}])&&Fe(n.prototype,r),o&&Fe(n,o),t}(Ze);function Ge(e){return(Ge="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function We(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Je(e,t,n){return t&&Xe(e.prototype,t),n&&Xe(e,n),e}function Ye(e,t){return!t||"object"!==Ge(t)&&"function"!=typeof t?et(e):t}function $e(e){return($e=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function et(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&nt(e,t)}function nt(e,t){return(nt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var rt=wp.i18n.__,ot=wp.element.Component,at=wp.components,it=(at.Toolbar,at.ServerSideRender,at.PanelBody,at.PanelRow,at.SelectControl,at.ToggleControl),lt=(at.RangeControl,at.Dashicon),ct=function(e){function t(e){var n;return We(this,t),(n=Ye(this,$e(t).call(this,e))).state={display_option:"all",display_option_settings_open:!1},n.toggleIncludeInactive=n.toggleIncludeInactive.bind(et(n)),n.closeDisplayOptionSettings=n.closeDisplayOptionSettings.bind(et(n)),n.updateDisplayOption=n.updateDisplayOption.bind(et(n)),n.getCurrentDisplayOption=n.getCurrentDisplayOption.bind(et(n)),n.getCurrentView=n.getCurrentView.bind(et(n)),n}return tt(t,e),Je(t,[{key:"componentDidMount",value:function(){var e=this.props.attributes,t=e.campaigns,n=e.categories,r=e.creator,o="all";t.length?o="specific":(n.length||r.length)&&(o="filter"),this.setState({display_option:o})}},{key:"closeDisplayOptionSettings",value:function(){this.setState({display_option_settings_open:!1})}},{key:"toggleIncludeInactive",value:function(){var e=this.props,t=e.attributes;(0,e.setAttributes)({includeInactive:!t.includeInactive})}},{key:"updateDisplayOption",value:function(e){var t=this.props,n=(t.attributes,t.setAttributes);if(["all","filter","specific"].includes(e))switch(this.setState({display_option:e,display_option_settings_open:!0}),e){case"all":n({categories:[],campaigns:[],creator:"",includeInactive:!1});break;case"filter":n({campaigns:[]});break;case"specific":n({categories:[],campaignsToExclude:[],creator:"",includeInactive:!0})}}},{key:"getCurrentDisplayOption",value:function(){var e=null;switch(this.state.display_option){case"all":e=rt("All active campaigns","charitable");break;case"filter":e=rt("Filtered campaigns","charitable");break;case"specific":e=rt("Specific campaigns","charitable")}return e}},{key:"getCurrentView",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=null;if(this.state.display_option_settings_open)switch(this.state.display_option){case"all":r=wp.element.createElement(mt,{setAttributes:n,attributes:t,update_include_inactive_callback:this.toggleIncludeInactive});break;case"filter":r=wp.element.createElement(ft,{setAttributes:n,attributes:t,update_include_inactive_callback:this.toggleIncludeInactive});break;case"specific":r=wp.element.createElement(pt,{setAttributes:n,attributes:t})}else r=wp.element.createElement(st,{attributes:t,title:rt("Filter campaigns","charitable"),selected_display_option:this.state.display_option,update_display_option_callback:this.updateDisplayOption});return r}},{key:"render",value:function(){var e=this.props,t=e.attributes,n=(e.setAttributes,t.categories,t.includeInactive,t.campaigns,t.campaignsToExclude,t.creator,t.columns,t.displayOption,null);return this.state.display_option_settings_open&&(n=wp.element.createElement("div",{className:"charitable-block-settings-breadcrumbs"},wp.element.createElement("a",{href:"#",onClick:this.closeDisplayOptionSettings},rt("Display different campaigns","charitable")))),wp.element.createElement("div",{class:"charitable-block-settings charitable-block-settings-campaigns"},wp.element.createElement("div",{className:"charitable-block-settings-heading"},wp.element.createElement("h2",{className:"charitable-block-settings-title"},Oe," ",rt("Campaigns","charitable"))),wp.element.createElement("div",{className:"charitable-block-settings-campaigns-subheading"},wp.element.createElement("p",null,wp.element.createElement("strong",null,rt("Currently showing:","charitable")),"Â ",this.getCurrentDisplayOption())),n,this.getCurrentView())}}]),t}(ot),st=function(e){function t(){return We(this,t),Ye(this,$e(t).apply(this,arguments))}return tt(t,e),Je(t,[{key:"render",value:function(){var e=this.props,t=e.title,n=e.selected_display_option,r=e.update_display_option_callback,o=t.length?wp.element.createElement("p",{className:"charitable-block-settings-campaigns--display-options-header"},wp.element.createElement("strong",null,t)):"";return wp.element.createElement("div",{className:"charitable-block-settings-campaigns--display-options-wrapper"},o,wp.element.createElement("ul",{className:"charitable-block-settings-campaigns--display-options"},wp.element.createElement(ut,{selected_display_option:n,update_display_option_callback:r,option:"all",label:rt("Show all campaigns","charitable")}),wp.element.createElement(ut,{selected_display_option:n,update_display_option_callback:r,option:"filter",label:rt("Filter by category, tag or campaign creator","charitable")}),wp.element.createElement(ut,{selected_display_option:n,update_display_option_callback:r,option:"specific",label:rt("Choose specific campaigns","charitable")})))}}]),t}(ot),ut=function(e){function t(){return We(this,t),Ye(this,$e(t).apply(this,arguments))}return tt(t,e),Je(t,[{key:"render",value:function(){var e=this.props,t=e.option,n=e.label,r=e.selected_display_option,o=e.update_display_option_callback;return wp.element.createElement("li",{className:t===r?"active-option":"",onClick:function(){return o(t)}},t===r?wp.element.createElement(lt,{icon:"yes"}):"",n,wp.element.createElement("button",{onClick:function(){return o(t)},className:"charitable-block-settings-campaigns--display-options-button",type:"button"},wp.element.createElement(lt,{icon:"admin-generic"})))}}]),t}(ot),pt=function(e){function t(){return We(this,t),Ye(this,$e(t).apply(this,arguments))}return tt(t,e),Je(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=t.campaigns,o=t.columns;return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--specific"},wp.element.createElement(le,{attributes:t,label:rt("Choose campaigns","charitable"),search_placeholder:rt("Search for campaigns to display","charitable"),selected_campaigns:r,update_campaign_setting_callback:function(e){return n({campaigns:e})},multiple:!0,columns:o,campaign_active_status:""}))}}]),t}(ot),mt=function(e){function t(){return We(this,t),Ye(this,$e(t).apply(this,arguments))}return tt(t,e),Je(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=e.update_include_inactive_callback,o=t.campaignsToExclude,a=t.includeInactive;return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--all"},wp.element.createElement(it,{label:rt("Include inactive campaigns","charitable"),checked:!!a,onChange:r}),wp.element.createElement(ze,{title:rt("Exclude Campaigns","charitable"),enabled:!1},wp.element.createElement(le,{attributes:t,label:rt("Campaigns to exclude","charitable"),search_placeholder:rt("Search for campaigns to exclude","charitable"),selected_campaigns:o,update_campaign_setting_callback:function(e){return n({campaignsToExclude:e})},multiple:!0,campaign_active_status:""})))}}]),t}(ot),ft=function(e){function t(){return We(this,t),Ye(this,$e(t).apply(this,arguments))}return tt(t,e),Je(t,[{key:"render",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=e.update_include_inactive_callback,o=t.categories,a=t.campaignsToExclude,i=t.includeInactive,l=(t.campaigns,t.columns);return wp.element.createElement("div",{className:"charitable-block-settings-view charitable-block-settings-view--filter"},wp.element.createElement(it,{label:rt("Include inactive campaigns","charitable"),checked:!!i,onChange:r}),wp.element.createElement(ze,{title:rt("Category","charitable"),enabled:!1},wp.element.createElement(Ve,{attributes:t,label:rt("Filter by category","charitable"),selected_categories:o,update_category_setting_callback:function(e){return n({categories:e})}})),wp.element.createElement(ze,{title:rt("Exclude Campaigns","charitable"),enabled:!1},wp.element.createElement(le,{attributes:t,label:rt("Campaigns to exclude","charitable"),search_placeholder:rt("Search for campaigns to exclude","charitable"),selected_campaigns:a,update_campaign_setting_callback:function(e){return n({campaignsToExclude:e})},multiple:!0,columns:l,campaign_active_status:""})))}}]),t}(ot);function dt(e){return(dt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],r=!0,o=!1,a=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done)&&(n.push(i.value),!t||n.length!==t);r=!0);}catch(e){o=!0,a=e}finally{try{r||null==l.return||l.return()}finally{if(o)throw a}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ht(e){return(ht=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function gt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wt(e,t){return(wt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var vt=wp.i18n.__,_t=wp.element.Component,Et=wp.components,kt=Et.Toolbar,Ot=Et.ServerSideRender,Ct=Et.PanelBody,St=Et.PanelRow,Dt=Et.SelectControl,jt=Et.ToggleControl,Pt=Et.RangeControl,xt=(Et.Dashicon,wp.editor),Tt=xt.InspectorControls,At=xt.BlockControls,Nt=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=ht(t).apply(this,arguments))||"object"!==dt(r)&&"function"!=typeof r?gt(n):r).state={edit_mode:!1},e.updateEditMode=e.updateEditMode.bind(gt(e)),e.toggleMasonryLayout=e.toggleMasonryLayout.bind(gt(e)),e.toggleResponsiveLayout=e.toggleResponsiveLayout.bind(gt(e)),e.getInspectorControls=e.getInspectorControls.bind(gt(e)),e.getToolbarControls=e.getToolbarControls.bind(gt(e)),e.getSettingsEditor=e.getSettingsEditor.bind(gt(e)),e.getPreview=e.getPreview.bind(gt(e)),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&wt(e,t)}(t,e),n=t,(r=[{key:"updateEditMode",value:function(){this.setState({edit_mode:!this.state.edit_mode})}},{key:"toggleMasonryLayout",value:function(){var e=this.props.attributes.masonryLayout;(0,this.props.setAttributes)({masonryLayout:!e})}},{key:"toggleResponsiveLayout",value:function(){var e=this.props.attributes.responsiveLayout;(0,this.props.setAttributes)({responsiveLayout:!e})}},{key:"getInspectorControls",value:function(){var e=this.props,t=e.attributes,n=e.setAttributes,r=t.number,o=t.orderBy,a=t.order,i=t.columns,l=t.masonryLayout,c=t.responsiveLayout,s=o+"/"+a;return wp.element.createElement(Tt,{key:"inspector",description:vt("Configure","charitable")},wp.element.createElement(Ct,{title:vt("Display Settings","charitable")},wp.element.createElement(St,null,wp.element.createElement(Dt,{key:"orderby-select",label:vt("Order by","charitable"),value:s,options:[{label:vt("Date created (newest to oldest)","charitable"),value:"post_date/DESC"},{label:vt("Date created (oldest to newest)","charitable"),value:"post_date/ASC"},{label:vt("Amount donated","charitable"),value:"popular/DESC"},{label:vt("Time left (least first)","charitable"),value:"ending/DESC"},{label:vt("Time left (longest first)","charitable"),value:"ending/ASC"}],onChange:function(e){var t=bt(e.split("/"),2),r=t[0],i=t[1];i!==a&&n({order:i}),r!==o&&n({orderBy:r})}})),wp.element.createElement(St,null,wp.element.createElement(Pt,{key:"number-control",label:vt("Number of campaigns","charitable"),value:r,onChange:function(e){return n({number:e})},min:"-1",max:"999"})),wp.element.createElement(St,null,wp.element.createElement(Pt,{key:"columns-select",label:vt("Columns","charitable"),value:i,min:"1",max:"4",onChange:function(e){return n({columns:e})}})),wp.element.createElement(St,null,wp.element.createElement(jt,{label:vt("Masonry layout","charitable"),checked:l,onChange:this.toggleMasonryLayout})),wp.element.createElement(St,null,wp.element.createElement(jt,{label:vt("Responsive layout","charitable"),checked:c,onChange:this.toggleResponsiveLayout}))))}},{key:"getToolbarControls",value:function(){var e=[{icon:"filter",title:vt("Filter Campaigns","charitable"),onClick:this.updateEditMode,isActive:this.state.edit_mode}];return wp.element.createElement(At,{key:"controls"},wp.element.createElement(kt,{controls:e}))}},{key:"getSettingsEditor",value:function(){return wp.element.createElement(ct,this.props)}},{key:"getPreview",value:function(){return wp.element.createElement("div",{class:"charitable-block-campaigns has-preview"},wp.element.createElement(Ot,{block:"charitable/campaigns",attributes:this.props.attributes}))}},{key:"render",value:function(){return[this.getInspectorControls(),this.getToolbarControls(),this.state.edit_mode?this.getSettingsEditor():this.getPreview()]}}])&&yt(n.prototype,r),o&&yt(n,o),t}(_t),Rt=wp.i18n.__;function It(e){return(It="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Mt(e){return(Mt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ht(e,t){return(Ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}(0,wp.blocks.registerBlockType)("charitable/campaigns",{title:Rt("Campaigns","charitable"),description:Rt("Display a list or grid of campaigns.","charitable"),category:"widgets",icon:Oe,keywords:[Rt("Fundraisers"),Rt("Charitable"),Rt("Donation")],attributes:{categories:{type:"array",default:[],items:{type:"string"}},includeInactive:{type:"boolean",default:!1},campaigns:{type:"array",default:[],items:{type:"number"}},campaignsToExclude:{type:"array",default:[],items:{type:"number"}},creator:{type:"string",default:""},order:{type:"string",default:"DESC"},orderBy:{type:"string",default:"post_date"},number:{type:"number",default:10},columns:{type:"number",default:2},masonryLayout:{type:"boolean",default:!1},responsiveLayout:{type:"boolean",default:!0}},edit:function(e){return wp.element.createElement(Nt,e)},save:function(){return null}});var Bt=wp.i18n.__,Ft=wp.element.Component,Qt=wp.components,qt=Qt.Toolbar,Kt=Qt.ServerSideRender,Zt=wp.editor.BlockControls,Ut=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=Mt(t).apply(this,arguments))||"object"!==It(r)&&"function"!=typeof r?Vt(n):r).state={edit_mode:!e.props.attributes.campaign},e.getInspectorControls=e.getInspectorControls.bind(Vt(e)),e.getToolbarControls=e.getToolbarControls.bind(Vt(e)),e.getSettingsEditor=e.getSettingsEditor.bind(Vt(e)),e.getPreview=e.getPreview.bind(Vt(e)),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ht(e,t)}(t,e),n=t,(r=[{key:"getInspectorControls",value:function(){return""}},{key:"getToolbarControls",value:function(){var e=this,t=this.state.edit_mode,n=this.props,r=n.attributes,o=(n.setAttributes,r.campaign),a=[{icon:"edit",title:Bt("Edit"),onClick:o?function(){return e.setState({edit_mode:!t})}:function(){},isActive:this.state.edit_mode}];return wp.element.createElement(Zt,{key:"controls"},wp.element.createElement(qt,{controls:a}))}},{key:"getSettingsEditor",value:function(){var e=this,t=this.props,n=t.attributes,r=t.setAttributes,o=n.campaign,a=o?[o]:[];return wp.element.createElement("div",{class:"charitable-block-donation-form charitable-block-settings"},wp.element.createElement(le,{attributes:n,selected_campaigns:a,update_campaign_setting_callback:function(t){r({campaign:t[0]}),e.setState({edit_mode:!t.length})},multiple:!1,campaign_active_status:"active"}))}},{key:"getPreview",value:function(){return wp.element.createElement("div",{class:"charitable-block-donation-form has-preview"},wp.element.createElement("div",{class:"charitable-block-overlay"}),wp.element.createElement(Kt,{block:"charitable/donation-form",attributes:this.props.attributes}))}},{key:"render",value:function(){return[this.getInspectorControls(),this.getToolbarControls(),this.state.edit_mode?this.getSettingsEditor():this.getPreview()]}}])&&Lt(n.prototype,r),o&&Lt(n,o),t}(Ft),zt=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M17.69,2.31V5.69H2.31V2.31H17.69M20,0H0V8H20V0Z"}),wp.element.createElement("path",{d:"M17.69,8.31v3.38H2.31V8.31H17.69M20,6H0v8H20V6Z"}),wp.element.createElement("path",{d:"M17.69,14.31v3.38H2.31V14.31H17.69M20,12H0v8H20V12Z"})),Gt=wp.i18n.__;(0,wp.blocks.registerBlockType)("charitable/donation-form",{title:Gt("Donation Form","charitable"),description:Gt("Display a campaign's donation form.","charitable"),category:"widgets",icon:zt,keywords:[Gt("Donate","charitable"),Gt("Charitable")],attributes:{campaign:{type:"number",default:0}},transforms:{from:[{type:"shortcode",tag:"charitable_donation_form",attributes:{campaign:{type:"string",shortcode:function(e){var t=e.named.campaign_id,n=void 0===t?"":t;return n?parseInt(n,10):""}}}}]},edit:function(e){return wp.element.createElement(Ut,e)},save:function(e){return null}});var Wt=wp.element.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"20px",height:"20px",viewBox:"0 0 20 20"},wp.element.createElement("path",{d:"M0,0V20H20V0ZM10,3A3,3,0,1,1,7,6,3,3,0,0,1,10,3Zm5,14H5V12.89A2.89,2.89,0,0,1,7.89,10h4.22A2.89,2.89,0,0,1,15,12.89Z"}));function Xt(e){return(Xt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Jt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Yt(e){return(Yt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function $t(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function en(e,t){return(en=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var tn=wp.i18n.__,nn=wp.element.Component,rn=wp.editor.InspectorControls,on=wp.components,an=on.PanelBody,ln=on.PanelRow,cn=on.SelectControl,sn=on.ToggleControl,un=on.RangeControl,pn=function(e){function t(){var e,n,r;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),n=this,(e=!(r=Yt(t).apply(this,arguments))||"object"!==Xt(r)&&"function"!=typeof r?$t(n):r).toggleDisplayDonorName=e.toggleDisplayDonorName.bind($t(e)),e.toggleDisplayDonorAmount=e.toggleDisplayDonorAmount.bind($t(e)),e.toggleDisplayDonorLocation=e.toggleDisplayDonorLocation.bind($t(e)),e.toggleDisplayDonorAvatar=e.toggleDisplayDonorAvatar.bind($t(e)),e.toggleDistinctDonors=e.toggleDistinctDonors.bind($t(e)),e}var n,r,o;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&en(e,t)}(t,e),n=t,(r=[{key:"toggleDisplayDonorName",value:function(){var e=this.props.attributes.displayDonorName;(0,this.props.setAttributes)({displayDonorName:!e})}},{key:"toggleDisplayDonorLocation",value:function(){var e=this.props.attributes.displayDonorLocation;(0,this.props.setAttributes)({displayDonorLocation:!e})}},{key:"toggleDisplayDonorAvatar",value:function(){var e=this.props.attributes.displayDonorAvatar;(0,this.props.setAttributes)({displayDonorAvatar:!e})}},{key:"toggleDisplayDonorAmount",value:function(){var e=this.props.attributes.displayDonorAmount;(0,this.props.setAttributes)({displayDonorAmount:!e})}},{key:"toggleDistinctDonors",value:function(){var e=this.props.attributes.distinctDonors;(0,this.props.setAttributes)({distinctDonors:!e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.attributes,r=t.isSelected,o=t.setAttributes,a=n.number,i=n.orderBy,l=n.campaign,c=n.distinctDonors,s=n.orientation,u=n.displayDonorAmount,p=n.displayDonorName,m=n.displayDonorLocation,f=n.displayDonorAvatar;return[r&&wp.element.createElement(rn,{key:"inspector",description:tn("Configure")},wp.element.createElement(un,{key:"number-control",label:tn("Number of donors"),value:a,onChange:function(e){return o({number:e})},min:"-1",max:"999"}),wp.element.createElement(ce,{key:"campaign-select",label:tn("Campaign"),withOptions:[{label:tn("All Campaigns"),value:"all"}],selectedOption:l,onChange:function(t){return e.props.setAttributes({campaign:t})}}),wp.element.createElement(cn,{key:"orderby-select",label:tn("Order by"),value:i,options:[{label:tn("Most recent"),value:"recent"},{label:tn("Amount donated"),value:"amount"}],onChange:function(e){return o({orderBy:e})}}),wp.element.createElement(sn,{key:"distinct-donors-toggle",label:tn("Only show unique donors"),checked:c,onChange:this.toggleDistinctDonors}),wp.element.createElement(an,{title:tn("Display Settings")},wp.element.createElement(ln,null,wp.element.createElement(cn,{key:"orientation-select",label:tn("Orientation"),value:s,options:[{label:tn("Vertical"),value:"vertical"},{label:tn("Horizontal"),value:"horizontal"}],onChange:function(e){return o({orientation:e})}})),wp.element.createElement(ln,null,wp.element.createElement(sn,{label:tn("Display the name of the donor"),checked:p,onChange:this.toggleDisplayDonorName})),wp.element.createElement(ln,null,wp.element.createElement(sn,{label:tn("Display the amount donated by the donor"),checked:u,onChange:this.toggleDisplayDonorAmount})),wp.element.createElement(ln,null,wp.element.createElement(sn,{label:tn("Display the location of the donor"),checked:m,onChange:this.toggleDisplayDonorLocation})),wp.element.createElement(ln,null,wp.element.createElement(sn,{label:tn("Display the avatar of the donor"),checked:f,onChange:this.toggleDisplayDonorAvatar})))),wp.element.createElement("p",{key:"charitable-donors"},tn("DONORS"))]}}])&&Jt(n.prototype,r),o&&Jt(n,o),t}(nn),mn=wp.i18n.__;(0,wp.blocks.registerBlockType)("charitable/donors",{title:mn("Donors"),category:"widgets",icon:Wt,keywords:[mn("Donations"),mn("Charitable"),mn("Backer")],edit:pn,save:function(){return wp.element.createElement("p",null,mn("DONORS"))}})}]);